#######
#
# Configuration file for HH2yybbAnalysis
#
#######


##################################
# Job steering setup

OutputDir:        HH2yybbAnalysis_DATE
SampleName:       sample
InputFileList:    input_data.txt
BaseConfig:       HGamAnalysisFramework/HGamMC15.config

##################################
# HgammaAnalysis setup

HgammaAnalysis.PrintConfig:                    NO
IsAFII                                         YES

##################################
# Event selection settings

EventHandler.CheckDalitz:                      YES

EventHandler.CheckGRL:                         YES
EventHandler.CheckTile:                        YES
EventHandler.CheckLAr:                         YES
EventHandler.CheckCore:                        YES
EventHandler.CheckVertex:                      YES

EventHandler.CheckTriggers:                    NO
EventHandler.RequiredTriggers:
EventHandler.CheckTriggerMatching:             NO

##################################
# Photon calibration & smearing settings
PhotonHandler.Selection.ApplyPIDCut:             YES
PhotonHandler.Selection.ApplyAuthorCut:          YES
PhotonHandler.Selection.ApplyIsoCut:             YES
PhotonHandler.Selection.IsoCriteria:             Cone20 Cone20Higgs Cone40 Cone40CaloOnly

HH2yybb.PhotonSelection.UseFakePhotons:          NO
HH2yybb.PhotonSelection.DefaultFakeProb:         0.02957
HH2yybb.PhotonSelection.FakeProbFit.p0:          0.04859
HH2yybb.PhotonSelection.FakeProbFit.p1:          -0.0005282

##################################
# Electron calibration & smearing settings


##################################
# Muon calibration & smearing settings

# Basic selection criteria
MuonHandler.Selection.PID:                       Medium
MuonHandler.Selection.MaxEta:                    2.7

MuonHandler.Selection.ApplyPtCut:                True
MuonHandler.Selection.PtCutGeV:                  4.0

MuonHandler.Selection.ApplyIPCuts:               YES
MuonHandler.Selection.d0Max:                     1.0
MuonHandler.Selection.z0Max:                     10.0

##################################
# Jet calibration

# Basic selection criteria
JetHandler.Selection.MaxAbsRapidity:             4.4
JetHandler.Selection.PtPreCutGeV:                25.0
JetHandler.Selection.CutLevel:                   LooseBad
JetHandler.Selection.JVF:                        -1
JetHandler.Selection.JVT:                        0.9421
#New JVT value to be used with new btagging CDI file
#JetHandler.Selection.JVT:                        0.64

# BTagging
JetHandler.EnableBTagging:                       YES
JetHandler.BTagging.MaxAbsRapidity:              2.5

JetHandler.BTagging.TaggerNames:                 MV2c20
JetHandler.BTagging.ScaleFactorFileName:         HGamAnalysisFramework/2015-PreRecomm-13TeV-MC12-CDI-May19-v1.root

JetHandler.MV2c20.Efficiencies:                  60     70      77      85
JetHandler.MV2c20.OperatingPoints:               0_5102 0_0314 -0_3867 -0_7682
#New MV2c20 values to be used with new btagging CDI file
#JetHandler.MV2c20.OperatingPoints:               0_4496 -0_0436 -0_4434 -0_7887

HH2yybb.Selection.UseWorkingPoint:               MV2c20_85

# BJet Category
HH2yybb.Category.0BJet:                          YES
HH2yybb.Category.1BJet:                          YES
HH2yybb.Category.2BJet:                          YES
HH2yybb.doHiggsPairing:                          NO

# BJet Response
HH2yybb.Category.JetResponse:                    NO

# BJet Selections
HH2yybb.LeadingBJet.EtaCut:                      2.5
HH2yybb.LeadingBJet.PtCut:                       55.0
HH2yybb.SubLeadingBJet.EtaCut:                   2.5
HH2yybb.SubLeadingBJet.PtCut:                    35.0

#Do BJet Muon Correction
HH2yybb.doJetMuonCorrection:                     YES
HH2yybb.addAllMuonsToJets:                       YES
HH2yybb.saveJetMuonCorrection:                   YES
HH2yybb.MuonJetP4Correction.DeltaR:              0.4
HH2yybb.MuonJetP4Correction.MinMuonPt:           4.0

# BB Selections
HH2yybb.MbbWindow.Low:                           95.0
HH2yybb.MbbWindow.High:                          135.0

# yy selection
HH2yybb.MyyWindow.Low                            105.0
HH2yybb.MyyWindow.High                           160.0

# Simple bb scaling to Higgs mass
HH2yybb.doSimpleBBScaling:                       NO
HH2yybb.HiggsMassValue:                          125.0

# BJet scaling
HH2yybb.doBJetScaling:                           NO
HH2yybb.ScalingType:                             2D
HH2yybb.BJetScalingFile:                         HH2yybb/BJetScaleVals.root
#Which variables are saved before scaling
HH2yybb.Variables.PreScaleJet:                   pt.m

############
# Truth Category
HH2yybb.Category.Truth:                          NO

############
# Systematics
HH2yybb.Systematics.applySystematics:            NO

############
# What to save in the output MxAOD
HH2yybb.saveMxAOD:                               YES

# Save containers (If you wish to use the MxAOD as an input to this framework the below must be set to YES)
HH2yybb.saveContainer.Jets:                      YES
HH2yybb.saveContainer.Photons:                   YES
HH2yybb.saveContainer.Muons:                     YES
HH2yybb.saveContainer.Electrons:                 YES

# What to save in the output MxAOD
MxAOD.Variables.Photon:         pt.eta.phi.m.eta_s2.ptcone20.topoetcone20.relEreso.isConv.isTight.isIsoCone20.isIsoCone20Higgs.isIsoCone40.isIsoCone40CaloOnly
MxAOD.Variables.Jet:            pt.eta.phi.m.Timing.Jvt
MxAOD.Variables.Electron:       pt.eta.phi.m.ptvarcone20.topoetcone20
MxAOD.Variables.Muon:           pt.eta.phi.m.ptvarcone20.topoetcone20.passIPCut
MxAOD.Variables.EventInfo:      runNumber.eventNumber.lumiBlock.averageInteractionsPerCrossing.eventTypeBitmask.mcChannelNumber
MxAOD.Variables.TruthPhotons:   px.py.pz.e.m.etcone20.etcone40
MxAOD.Variables.TruthElectrons: px.py.pz.e.m
MxAOD.Variables.TruthMuons:     px.py.pz.e.m
MxAOD.Variables.TruthJets:      pt.eta.phi.m

#
###############
